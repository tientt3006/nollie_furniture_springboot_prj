<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="admin.css">
</head>

<body>

    <div class="wrapper">



        <header class="header">
            
                <div class="logo">
                    <a href="../home/home.html" class="logo-link" style="display: flex; text-decoration: none;">
                    <img src="../../images/logoonly.png" alt="Logo">
                    <p class="logo-name">NollieConcept</p>
                    </a>
                </div>
                <div class="nav-right nav-icons">
                    <div class="user-dropdown">
                        <img src="../../images/user.png" alt="User" class="icon user-icon">
                        <div class="dropdown-menu">
                            <!-- Default options for logged-out users -->
                            <a href="../io/signin.html" class="dropdown-item" id="signin">Sign In</a>
                            <a href="../io/signup.html" class="dropdown-item" id="signup">Sign Up</a>
                            <!-- Options for logged-in users (hidden by default) -->
                            <a href="../io/userinfo.html" class="dropdown-item" id="info" style="display: none;">Info</a>
                            <a href="../home/home.html" class="dropdown-item" id="logout" style="display: none;">Logout</a>
                        </div>
                    </div>
                </div>
        </header>



        <div class="main-container">



            <div class="second-main-container">
                <div class="sidebar">
                    <h3>Admin</h3>
                    <a href="./dashboard.html">Dashboard</a>
                    <a href="./product_management.html">All Products</a>
                    <a href="./add_product.html">Add Product</a>
                    <a href="./collection_management.html">All Collectins</a>
                    <a href="./add_collection.html">Add Collecion</a>
                    <a href="./option_management.html">All Options</a>
                    <a href="./add_option.html">Add Option</a>
                    <a href="./coupon_management.html">All Coupons</a>
                    <a href="./add_coupon.html">Add Coupons</a>
                    <a href="./user_management.html">Users</a>
                    <a href="./order_list.html">Orders</a>
                    
                </div>

                
                <section class="container mt-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>User Management</h2>
                        <div>
                            <input type="text" id="search-id-input" class="form-control d-inline-block w-auto" placeholder="Search by ID">
                            <input type="text" id="search-name-input" class="form-control d-inline-block w-auto" placeholder="Search by Name">
                            <select id="role-filter" class="form-select d-inline-block w-auto">
                                <option value="customer" selected>Customer</option>
                                <option value="staff">Staff</option>
                                <option value="admin">Admin</option>
                            </select>
                            <button id="search-button" class="btn btn-outline-secondary">Search</button>
                        </div>
                    </div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="user-table-body">
                            <!-- User rows will be dynamically added via JS -->
                        </tbody>
                    </table>
                    <div class="d-flex justify-content-between">
                        <span id="pagination-info">Showing 1-9 of 0</span>
                        <div>
                            <button id="prev-page" class="btn btn-outline-secondary">&lt;</button>
                            <button id="next-page" class="btn btn-outline-secondary">&gt;</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        // Sample user data
        const users = Array.from({ length: 50 }, (_, i) => ({
            id: i + 1,
            name: `User ${i + 1}`,
            email: `user${i + 1}@example.com`,
            phone: `123-456-789${i % 10}`,
            role: ["customer", "staff", "admin"][i % 3],
            status: i % 2 === 0 ? "active" : "deactive",
        }));

        let currentPage = 1;
        const rowsPerPage = 9;

        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("search-button").addEventListener("click", function () {
                const searchId = document.getElementById("search-id-input").value.trim();
                const searchName = document.getElementById("search-name-input").value.toLowerCase();
                const selectedRole = document.getElementById("role-filter").value;

                const filteredUsers = users.filter(user =>
                    (searchId === "" || user.id.toString() === searchId) &&
                    user.name.toLowerCase().includes(searchName) &&
                    (selectedRole === "" || user.role === selectedRole)
                );
                renderUsers(filteredUsers);
            });

            document.getElementById("prev-page").addEventListener("click", () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderUsers();
                }
            });

            document.getElementById("next-page").addEventListener("click", () => {
                if (currentPage * rowsPerPage < users.length) {
                    currentPage++;
                    renderUsers();
                }
            });

            renderUsers();
        });

        function renderUsers(userList = users) {
            const tableBody = document.getElementById("user-table-body");
            tableBody.innerHTML = "";

            const start = (currentPage - 1) * rowsPerPage;
            const end = start + rowsPerPage;
            const paginatedUsers = userList.slice(start, end);

            paginatedUsers.forEach(user => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone}</td>
                    <td>${user.role}</td>
                    <td>${user.status}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-danger">Lock</button>
                        ${user.role !== "customer" ? `<button class="btn btn-sm btn-outline-primary" onclick="location.href='./edit_staff.html?id=${user.id}'">Edit</button>` : ""}
                    </td>
                `;
                tableBody.appendChild(row);
            });

            document.getElementById("pagination-info").textContent = `Showing ${start + 1}-${Math.min(end, userList.length)} of ${userList.length}`;
        }
    </script>
    <script src="admin.js"></script>
</body>

</html>
